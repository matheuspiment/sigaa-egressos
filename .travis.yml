language: node_js
os: linux
dist: xenial
cache:
  directories:
    - ~/.yarn
    - '$HOME/.sonar/cache'
notifications:
  email: false
node_js:
  - '9'
  - '8'
addons:
  sonarcloud:
    organization: "matheuspiment-github"
    token:
      secure: $SONAR_TOKEN
jdk:
  - oraclejdk11
script:
  - yarn cover
  - yarn check-coverage
  - yarn build
  - sonar-scanner
after_success:
  - yarn report-coverage
  - yarn travis-deploy-once "yarn semantic-release"
branches:
  only:
    - master
